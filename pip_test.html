<html>
<body>
	v8
<button id="pip_button">Open PIP</button>
<button id="window_button">Open new window</button>
<button id="file_picker_button">Open file picker</button>
<div id="frame1">
	This content will move to the other window.
	<input type="file" id="file_picker"></input>
</div>

<script>
let newWindow = null;
let pipWindow = null;
	
const pipButton = document.getElementById("pip_button");
pipButton.addEventListener('click', async () => {
	  console.log("Open PIP clicked.");
	
	  const player = document.querySelector("#frame1");
	  // Open a Picture-in-Picture window.
	  pipWindow = await documentPictureInPicture.requestWindow();
	
	  // Move the player to the Picture-in-Picture window.
	  pipWindow.document.body.append(player);
  });
	
const windowButton = document.getElementById("window_button");
windowButton.addEventListener('click', async () => {
	  console.log("Open new window clicked.");
	
	  const player = document.querySelector("#frame1");
	  // Open a new window.
	  newWindow = window.open("", "_blank");
	
	  // Move the player to the Picture-in-Picture window.
	  newWindow.document.body.append(player);
  });

const file_picker = document.getElementById("file_picker");
console.log("file picker:");
console.log(file_picker);
const file_picker_button = document.getElementById("file_picker_button");
	
file_picker_button.addEventListener('click', async () => {
	console.log("Open file picker clicked.");

	if (pipWindow) {
		 const fileInputs = pipWindow.window.document.querySelectorAll('input[type="file"]');
     
	        fileInputs.forEach(input => {
		  input.click(); // Programmatically trigger the file selection dialog
	        });
		return;
	}
	if (newWindow) {
		 const fileInputs = newWindow.document.querySelectorAll('input[type="file"]');
     
	        fileInputs.forEach(input => {
		  input.click(); // Programmatically trigger the file selection dialog
	        });
		return;
	}
	
	file_picker.click();
  });
</script>
</body>
</html>
